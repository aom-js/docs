# Рекомендации

Существует наработанная практика, которая позволяет комфортно расширять функциональность сервиса,
создавая сложносвязанные компоненты.

Основная проблема, с которой можно столкнуться - это циклические ссылки. Рекомендуется использовать `.eslint.js`
с активированным контролем зависимостей `import/no-cycle`.

Наиболее частые случаи их обнаружения возникают:

- на уровне схем данных `Typegoose`, где решаются за счет использования стрелочной функции для доступа к классу
- на уровне контроллеров `aom`, где решаются за счет конструкций `FwdRef`
- на уровне общих библиотек, где могут не создавать проблем, или требуют индивидуальной оптимизации

В общем случае есть ряд рекомендаций, которые позволят минимизировать структурные ошибки при расширении кодовой базы.

## Структура каталогов

Рекомендуемая структура каталогов должна разделять логические элементы проекта: методы api, общие компоненты,
cхемы данных, функции на таймере и кафка,

```
+ ./
-- scripts/
--- development.ts
--- addsuperuser.ts
--- ...
-+ src/
--- api/
--+ common/
---- classes/
---- controllers/
---- decorators/
---- functions/
---- responses/
---- schemas/
--- config/
--- kafka/
--- schemas/
--- timers/
-- .env
-- .eslintrc.js
-- ecosystem.config.json
-- package.json
-- tsconfig.json
```

Контроллеры API не должны быть импортированы кем-либо за пределами каталога `./src/api` (если это происходит, значит
где-то нарушение логики использования данных, требующие рефакторинга), но они являются импортерами кода из всех
прочих каталогов.

## Структура API контроллера

Документация предоставлена в файле ["контроллеры API"](./api-controllers.md)

## Структура схем и моделей

Документация предоставлена в файле ["схемы данных"](./schemas.md)
